<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" playlist="width=device-width, initial-scale=1.0">
    <title>playlist Table with Even Columns</title>
    <style>
        .table-container {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            height: calc(87vh - 100px); 
        }

        .table-wrapper {
            overflow-x: auto;
            flex-grow: 1; 
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
            height: 100%;
            table-layout: fixed; 
        }

        .data-table thead {
            background-color: #f8f9fa;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .data-table th {
            padding: 12px 16px;
            text-align: left;
            font-weight: 600;
            color: #495057;
            border-bottom: 2px solid #e0e0e0;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .data-table td {
            padding: 12px 16px;
            border-bottom: 1px solid #e0e0e0;
            vertical-align: top;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .data-table tr:hover {
            background-color: #f8f9fa;
        }

        .sortable-header {
            display: flex;
            align-items: center;
            gap: 4px;
            color: inherit;
            text-decoration: none;
        }

        .sort-icon {
            font-size: 12px;
        }

        .playlist-preview {
            width: 150px;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f5f5f5;
            border-radius: 4px;
            overflow: hidden;
        }

        .playlist-thumbnail {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .video-thumbnail {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .video-thumbnail video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .play-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.6);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .file-icon {
            width: 48px;
            height: 48px;
            color: #6c757d;
        }

        .no-data {
            text-align: center;
            padding: 40px;
            color: #6c757d;
        }

        .table-footer {
            padding: 12px 16px;
            background: #f8f9fa;
            border-top: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
        }

        .footer-left {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .items-info {
            font-size: 14px;
            color: #495057;
            white-space: nowrap;
        }

        .pagination-controls {
            display: flex;
            align-items: center;
            gap: 4px;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
        }

        .pagination-nav {
            padding: 6px 10px;
            border: 1px solid #ced4da;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

        .pagination-nav:hover {
            background: #e9ecef;
        }

        .pagination-nav:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .page-numbers {
            display: flex;
            gap: 4px;
        }

        .page-number {
            padding: 6px 10px;
            border: 1px solid #ced4da;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

        .page-number.active {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }

        .page-number:hover:not(.active) {
            background: #e9ecef;
        }

        .pagination-select {
            padding: 6px 10px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            background-color: white;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="table-container">
        <div class="table-wrapper">
            <table class="data-table">
                <thead>
                    <tr>
                        {% if table_config.show_image %}
                            <th width="14%">playlist</th>
                        {% endif %}
                        {% if table_config.show_name %}
                            <th width="20%">
                                <a href="?sort=playlist_name&order={% if sort == 'playlist_name' and order == 'asc' %}desc{% else %}asc{% endif %}&q={{ request.GET.q|urlencode }}" class="sortable-header">
                                    playlist Name
                                    <span class="sort-icon">
                                        {% if sort == 'playlist_name' %}
                                            {% if order == 'asc' %}↑{% else %}↓{% endif %}
                                        {% endif %}
                                    </span>
                                </a>
                            </th>
                        {% endif %}
                        {% if table_config.show_details %}
                            <th width="20%">Details</th>
                        {% endif %}
                        {% if table_config.show_device %}
                            <th width="14%">Device</th>
                        {% endif %}
                        {% if table_config.show_date %}
                            <th width="14%">
                                <a href="?sort=date_modified&order={% if sort == 'date_modified' and order == 'asc' %}desc{% else %}asc{% endif %}&q={{ request.GET.q|urlencode }}" class="sortable-header">
                                    Date Modified
                                    <span class="sort-icon">
                                        {% if sort == 'date_modified' %}
                                            {% if order == 'asc' %}↑{% else %}↓{% endif %}
                                        {% endif %}
                                    </span>
                                </a>
                            </th>
                        {% endif %}
                        {% if table_config.show_creator %}
                            <th width="14%">
                                <a href="?sort=creator__username&order={% if sort == 'creator__username' and order == 'asc' %}desc{% else %}asc{% endif %}&q={{ request.GET.q|urlencode }}" class="sortable-header">
                                    Creator
                                    <span class="sort-icon">
                                        {% if sort == 'creator__username' %}
                                            {% if order == 'asc' %}↑{% else %}↓{% endif %}
                                        {% endif %}
                                    </span>
                                </a>
                            </th>
                        {% endif %}
                        {% if table_config.show_expiration %}
                            <th width="14%">
                                <a href="?sort=expiration_date&order={% if sort == 'expiration_date' and order == 'asc' %}desc{% else %}asc{% endif %}&q={{ request.GET.q|urlencode }}" class="sortable-header">
                                    Expiration Date
                                    <span class="sort-icon">
                                        {% if sort == 'expiration_date' %}
                                            {% if order == 'asc' %}↑{% else %}↓{% endif %}
                                        {% endif %}
                                    </span>
                                </a>
                            </th>
                        {% endif %}
                    </tr>
                </thead>
                <tbody>
                    {% for item in playlists %}
                    <tr>
                        {% if table_config.show_image %}
                            <td>
                                <div class="playlist-preview">
                                    {% if item.file_type_playlist == 'Image' %}
                                        <img src="{{ item.file.url }}" alt="{{ item.playlist_name }}" class="playlist-thumbnail">
                                    {% elif item.file_type_playlist == 'Video' %}
                                        <div class="video-thumbnail">
                                            <video>
                                                <source src="{{ item.file.url }}" type="video/mp4">
                                            </video>
                                            <div class="play-icon">▶</div>
                                        </div>
                                    {% else %}
                                        <div class="file-icon">
                                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                                <polyline points="14 2 14 8 20 8"></polyline>
                                            </svg>
                                        </div>
                                    {% endif %}
                                </div>
                            </td>
                        {% endif %}
                        {% if table_config.show_name %}
                            <td>{{ item.playlist_name }}</td>
                        {% endif %}
                        {% if table_config.show_details %}
                            <td>{{ item.file_details|truncatechars:50 }}</td>
                        {% endif %}
                        {% if table_config.show_device %}
                            <td>
                                {% if item.device %}
                                    {{ item.device.group.name|default:"No Group" }} ({{ item.device.resolution|default:"Unknown Resolution" }})
                                {% else %}
                                    {{ item.supported_device|default:"No Device" }}
                                {% endif %}
                            </td>
                        {% endif %}
                        {% if table_config.show_date %}
                            <td>{{ item.date_modified|date:"Y-m-d H:i" }}</td>
                        {% endif %}
                        {% if table_config.show_creator %}
                            <td>{{ item.creator.username }}</td>
                        {% endif %}
                        {% if table_config.show_expiration %}
                            <td>
                                {% if item.expiration_date %}
                                    {{ item.expiration_date|date:"Y-m-d H:i" }}
                                {% else %}
                                    No Expiration
                                {% endif %}
                            </td>
                        {% endif %}
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="{% if table_config.show_image %}{% if table_config.show_expiration %}7{% else %}6{% endif %}{% else %}{% if table_config.show_expiration %}6{% else %}5{% endif %}{% endif %}" class="no-data">No playlist available.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div class="table-footer">
            <div class="footer-left">
                <div class="items-info" id="items-info">1 - 9/9</div>
                <select id="items-per-page" class="pagination-select">
                    <option value="10">10</option>
                    <option value="25">25</option>
                    <option value="50">50</option>
                    <option value="100">100</option>
                </select>
            </div>
            <div class="pagination-controls">
                <button class="pagination-nav" id="first-page" title="First page">«</button>
                <button class="pagination-nav" id="prev-page" title="Previous page">‹</button>
                <div class="page-numbers" id="page-numbers"></div>
                <button class="pagination-nav" id="next-page" title="Next page">›</button>
                <button class="pagination-nav" id="last-page" title="Last page">»</button>
            </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMplaylistLoaded', function() {
        const itemsPerPageSelect = document.getElementById('items-per-page');
        const itemsInfo = document.getElementById('items-info');
        const table = document.querySelector('.data-table');
        const tbody = table.querySelector('tbody');
        const rows = Array.from(tbody.querySelectorAll('tr:not(.no-data)'));
        const pageNumbersContainer = document.getElementById('page-numbers');
        const firstPageBtn = document.getElementById('first-page');
        const prevPageBtn = document.getElementById('prev-page');
        const nextPageBtn = document.getElementById('next-page');
        const lastPageBtn = document.getElementById('last-page');

        let currentPage = 1;
        let itemsPerPage = itemsPerPageSelect ? parseInt(itemsPerPageSelect.value) : 10;

        function updatePagination() {
            const totalItems = rows.length;
            const totalPages = Math.ceil(totalItems / itemsPerPage);
            const startItem = (currentPage - 1) * itemsPerPage + 1;
            const endItem = Math.min(currentPage * itemsPerPage, totalItems);
            
            itemsInfo.textplaylist = `${startItem} - ${endItem}/${totalItems}`;
            
            pageNumbersContainer.innerHTML = '';
            
            for (let i = 1; i <= totalPages; i++) {
                const pageBtn = document.createElement('button');
                pageBtn.className = 'page-number' + (i === currentPage ? ' active' : '');
                pageBtn.textplaylist = i;
                pageBtn.addEventListener('click', () => {
                    currentPage = i;
                    updatePagination();
                });
                pageNumbersContainer.appendChild(pageBtn);
            }
            
            firstPageBtn.disabled = currentPage === 1;
            prevPageBtn.disabled = currentPage === 1;
            nextPageBtn.disabled = currentPage === totalPages;
            lastPageBtn.disabled = currentPage === totalPages;
            
            updateTable();
        }

        function updateTable() {
            const start = (currentPage - 1) * itemsPerPage;
            const end = start + itemsPerPage;
            
            rows.forEach((row, index) => {
                row.style.display = (index >= start && index < end) ? '' : 'none';
            });
        }

        if (itemsPerPageSelect) {
            itemsPerPageSelect.addEventListener('change', function() {
                itemsPerPage = parseInt(this.value);
                currentPage = 1;
                updatePagination();
            });
        }

        firstPageBtn.addEventListener('click', () => {
            currentPage = 1;
            updatePagination();
        });

        prevPageBtn.addEventListener('click', () => {
            if (currentPage > 1) {
                currentPage--;
                updatePagination();
            }
        });

        nextPageBtn.addEventListener('click', () => {
            const totalPages = Math.ceil(rows.length / itemsPerPage);
            if (currentPage < totalPages) {
                currentPage++;
                updatePagination();
            }
        });

        lastPageBtn.addEventListener('click', () => {
            const totalPages = Math.ceil(rows.length / itemsPerPage);
            currentPage = totalPages;
            updatePagination();
        });

        updatePagination();

        document.querySelectorAll('.video-thumbnail').forEach(thumbnail => {
            const video = thumbnail.querySelector('video');
            if (video) {
                thumbnail.addEventListener('mouseenter', () => {
                    video.play();
                });
                thumbnail.addEventListener('mouseleave', () => {
                    video.pause();
                    video.currentTime = 0;
                });
            }
        });
    });
    </script>
</body>
</html>